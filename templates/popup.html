<!DOCTYPE html>
<html ng-app="ClickTimeExtension" ng-csp>
    <head>
        <link rel="stylesheet" href="../css/bootstrap.min.css">
        <link rel="stylesheet" href="../css/font-awesome.min.css">
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/popup.css">
        <link rel="stylesheet" href="../css/angular-csp.css">
        <!-- libraries -->
        <script src="../js/lib/jquery-1.11.3.min.js"></script>
        <script src="../js/lib/angular.min.js"></script>
        <script src="../js/app/app.js"></script>
        <script src="../js/lib/bootstrap.min.js"></script>
        <script src="../js/lib/format.js"></script>
        <script src="../js/lib/customSelect.js"></script>


        <!-- Services -->
        <script src="../js/services/APIService.js"></script>
        <script src="../js/services/EntityService.js"></script>
        <script src="../js/app/PageController.js"></script>

        <!-- Objects -->
        <script src="../js/services/StopWatch.js"></script>
    </head>
    <body id="popup">
        <div id="overlay"></div>

        <header>
            <h1>Time Tracking!</h1>
        </header>
        <div ng-controller="PageController">
            <button ng-click="startStopWatch()">Start time</button>
            <button ng-click="stopStopWatch()">Stop time</button>
            <button ng-click="logout()">Sign Out</button>

            <button ng-click="saveTimeEntry(user, client, job, task)">Save Time</button>
            
            <h1>Time elapsed: <span ng-model="DisplayTime">{{DisplayTime}}</span></h1>

            <div class="refresh-container">
                <div class="refresh-message">
                    Can't find a recently created client, job, or task?
                </div>
                <button ng-click="refresh()">Refresh</button>
            </div>

            <div class="time-entry-container">
                <form name="time-entry-form">
                    <label>
                        Hours:
                        <input type="text" ng-model="user.timeEntry" size="20" ng-blur="roundHour(user.timeEntry, 0.25)">
                    </label>
                </form>
            </div>

            <div class="emptylistmessage" ng-show="IsManagerOrAdmin && HasEmptyEntities">You first need to add at least one client, job, and task to begin tracking <a href="https://app.clicktime.com/?dest=App/Dashboard" target="_blank">time</a>.</div>

            <div class="emptylistmessage" ng-show="!IsManagerOrAdmin && HasEmptyEntities">Please contact your manager or administrator and have them add at least one client, job, and task so you can begin tracking time.
            </div>
            
            <h3>Client: </h3>
            <div custom-select ng-model="client" ng-options="client as client.DisplayName for client in clients">
            </div>
            

            <h3>Job: </h3>
            <div custom-select ng-model="job" ng-options="job as job.DisplayName for job in jobs">
            </div>

            <h3>Task: </h3>
            <div custom-select ng-model="task" ng-options="task as task.DisplayName for task in tasks">
            </div>
        </div>
    </body>
</html>

