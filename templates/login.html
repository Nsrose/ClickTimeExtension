<!Doctype html>
<html ng-app="ClickTimeExtension" ng-csp>
    <head>
        <link rel="stylesheet" href="../css/popup.css">
        <link rel="stylesheet" href="../css/angular-csp.css">

        <!--<script src="js/lib/jquery-1.8.2.min.js"></script>-->
        <script src="../js/lib/angular.min.js"></script>
        <script src="../js/lib/angular-route.js"></script>
        <script src="../js/app/app.js"></script>


        <!-- Services -->
        <script src="../js/services/APIService.js"></script>
        <script src="../js/app/LoginController.js"></script>
    </head>

    <body id="popup">
        <header>
            <h1>Login</h1>
        </header>

        <!-- TODO: Add required fields and anuglar directives  -->

        <div ng-controller="LoginController">

            <div id="loading-mask" ng-show="rerouting">
                <div id="spinner"><img src="../img/spinner_white.gif"  class="img-scaled"></div>
            </div>

            <form name="loginForm">
                <p>Email:<br>
                    <input type="email" name="email" ng-model="user.email" required><br>
                    <span style="color:red" ng-show="loginForm.email.$dirty && loginForm.email.$invalid">
                        <span ng-show="loginForm.email.$error.required">Email is required.</span>
                        <span ng-show="loginForm.email.$error.email">bad emails make cats sad.</span>
                    </span>
                </p>

                <p>Password:<br>
                    <input type="password" name="password" ng-model="user.password" ng-minlength="3" ng-maxlength="23" maxlength="24" required><br>
                    <span style="color:red" ng-show="loginForm.password.$dirty && loginForm.password.$invalid">
                        <span ng-show="loginForm.password.$error.required">no hacking please.</span>
                        <span ng-show="loginForm.password.$error.minlength">minimum is 3 characters.</span>
                        <span ng-show="loginForm.password.$error.maxlength">maximum is 24 characters.</span>
                    </span> 
                </p>
            </form>
            <h2>
                Don't have an account? <a href="http://www.clicktime.com/forms/free-trial" target="_blank">Sign up here.</a>
            </h2>
            <button ng-disabled="loginForm.email.$invalid || loginForm.password.$invalid" ng-click="login(user)">Sign in</button>
            <span style="color:red" ng-show="loginError">    
                <p>Sorry, the email address or password you entered is not recognized. Please check your Caps Lock key and try again.</p>
            </span>
        </div>
    </body>
</html>

